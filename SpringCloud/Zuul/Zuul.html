<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Spring Cloud Zuul：API网关服务 | 阿利桑</title>
    <meta name="description" content="阿利桑 ALiSang-Mr 维基百科">
    <link rel="icon" href="/ALiSang-Mr.github.io/img/ali.ico">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    
    <link rel="preload" href="/ALiSang-Mr.github.io/assets/css/0.styles.21febb6e.css" as="style"><link rel="preload" href="/ALiSang-Mr.github.io/assets/js/app.4e173ec1.js" as="script"><link rel="preload" href="/ALiSang-Mr.github.io/assets/js/2.728c3c36.js" as="script"><link rel="preload" href="/ALiSang-Mr.github.io/assets/js/12.035f891d.js" as="script"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/10.413d4a8a.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/11.5e13bb02.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/13.8678ab9d.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/14.fd2682c5.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/15.79f7b2c6.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/16.dd7c3f73.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/17.4bd9133c.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/18.174b2afc.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/19.ef453d35.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/20.b9397fbc.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/21.88cbfa3d.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/22.190fbae8.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/23.255be8dc.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/24.d5ac6014.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/25.04a88ef4.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/26.919b3652.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/27.3fb2ecc8.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/28.b1412aff.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/29.51715fbe.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/3.8de677dd.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/30.334f2054.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/31.511d09e4.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/32.fa64cb71.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/33.0f6bccdd.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/34.cc5ab0f1.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/35.fcadeb75.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/36.a6a7d1b1.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/37.bb32a6af.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/38.830b348b.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/39.7a9225b7.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/4.40fbd1a3.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/40.7791cfe5.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/41.22b49eb6.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/42.edb08334.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/43.a6753e0a.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/44.993dbcdc.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/45.beea6627.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/46.30a8f03f.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/47.498642cd.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/48.cb8a97dd.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/49.f0ddc014.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/5.eee2d428.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/50.0362f335.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/51.b7d271b1.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/52.eb24d36d.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/53.7d012477.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/54.aa35e33b.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/55.0262d957.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/56.cc65acd7.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/57.6caae4af.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/58.25fc968c.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/59.ccacedc9.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/6.79dab355.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/60.a4b4a20c.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/7.80eef07c.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/8.d45d7c5e.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/9.118c7b84.js">
    <link rel="stylesheet" href="/ALiSang-Mr.github.io/assets/css/0.styles.21febb6e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ALiSang-Mr.github.io/" class="home-link router-link-active"><!----> <span class="site-name">阿利桑</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/ALiSang-Mr.github.io/FAQ/" class="nav-link">求索</a></div><div class="nav-item"><a href="/ALiSang-Mr.github.io/Store/" class="nav-link">仓库</a></div><div class="nav-item"><a href="/ALiSang-Mr.github.io/Thought/" class="nav-link">随笔</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Concat" class="dropdown-title"><span class="title">Concat</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://segmentfault.com/u/mulander" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Segmentfault
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/Java/Base/oop.html" class="nav-link">Java 面向对象基础</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/Java/Base/base.html" class="nav-link">Java 基础知识体系</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/Java/Concurrent/Thread.html" class="nav-link">Java 并发线程基础</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/Java/Concurrent/ExecutorPool.html" class="nav-link">Java 并发线程池</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SpringCloud" class="dropdown-title"><span class="title">SpringCloud</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/Eureka/Eureka.html" class="nav-link">Eureka 服务注册中心</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/Ribbon/Ribbon.html" class="nav-link">Ribbon 负载均衡的服务调用</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/Hystrix/Hystrix.html" class="nav-link">Hystrix 服务容错保护</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/OpenFeign/OpenFeign.html" class="nav-link">OpenFeign 基于Ribbon和Hystrix的声明式服务调用</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/Zuul/Zuul.html" class="nav-link router-link-exact-active router-link-active">Zuul API网关服务</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/Config/Config.html" class="nav-link">Config 外部集中化配置管理</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/Bus/Bus.html" class="nav-link">Bus 消息总线</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux" class="dropdown-title"><span class="title">Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/Linux/Deploy.html" class="nav-link">Linux 部署</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/Linux/Log.html" class="nav-link">Linux 日志命令</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/ALiSang-Mr" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub首页
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://mulander-j.github.io/island/code/html/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Island
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://mulander-j.github.io/timeWaster/demo/index.html#/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TimeWaster
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/ALiSang-Mr.github.io/FAQ/" class="nav-link">求索</a></div><div class="nav-item"><a href="/ALiSang-Mr.github.io/Store/" class="nav-link">仓库</a></div><div class="nav-item"><a href="/ALiSang-Mr.github.io/Thought/" class="nav-link">随笔</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Concat" class="dropdown-title"><span class="title">Concat</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://segmentfault.com/u/mulander" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Segmentfault
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/Java/Base/oop.html" class="nav-link">Java 面向对象基础</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/Java/Base/base.html" class="nav-link">Java 基础知识体系</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/Java/Concurrent/Thread.html" class="nav-link">Java 并发线程基础</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/Java/Concurrent/ExecutorPool.html" class="nav-link">Java 并发线程池</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SpringCloud" class="dropdown-title"><span class="title">SpringCloud</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/Eureka/Eureka.html" class="nav-link">Eureka 服务注册中心</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/Ribbon/Ribbon.html" class="nav-link">Ribbon 负载均衡的服务调用</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/Hystrix/Hystrix.html" class="nav-link">Hystrix 服务容错保护</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/OpenFeign/OpenFeign.html" class="nav-link">OpenFeign 基于Ribbon和Hystrix的声明式服务调用</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/Zuul/Zuul.html" class="nav-link router-link-exact-active router-link-active">Zuul API网关服务</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/Config/Config.html" class="nav-link">Config 外部集中化配置管理</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/Bus/Bus.html" class="nav-link">Bus 消息总线</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux" class="dropdown-title"><span class="title">Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/Linux/Deploy.html" class="nav-link">Linux 部署</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/Linux/Log.html" class="nav-link">Linux 日志命令</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/ALiSang-Mr" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub首页
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://mulander-j.github.io/island/code/html/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Island
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://mulander-j.github.io/timeWaster/demo/index.html#/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TimeWaster
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Eureka 服务注册中心</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Ribbon 负载均衡的服务调用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Hystrix 服务容错保护</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>OpenFeign 基于Ribbon和Hystrix的声明式服务调用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Zuul API网关服务</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ALiSang-Mr.github.io/SpringCloud/Zuul/Zuul.html" class="active sidebar-link">Zuul API网关服务</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Config 外部集中化配置管理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Bus 消息总线</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="spring-cloud-zuul：api网关服务"><a href="#spring-cloud-zuul：api网关服务" class="header-anchor">#</a> Spring Cloud Zuul：API网关服务</h1> <p></p><div class="table-of-contents"><ul><li><a href="#摘要">摘要</a></li><li><a href="#zuul简介">Zuul简介</a></li><li><a href="#创建一个zuul-proxy模块">创建一个zuul-proxy模块</a><ul><li><a href="#在pom-xml中添加相关依赖">在pom.xml中添加相关依赖</a></li><li><a href="#在application-yml中进行配置">在application.yml中进行配置</a></li><li><a href="#在启动类上添加-enablezuulproxy注解来启用zuul的api网关功能">在启动类上添加@EnableZuulProxy注解来启用Zuul的API网关功能</a></li></ul></li><li><a href="#常用功能">常用功能</a><ul><li><a href="#启动相关服务">启动相关服务</a></li><li><a href="#配置路由规则">配置路由规则</a></li><li><a href="#默认路由规则">默认路由规则</a></li><li><a href="#负载均衡功能">负载均衡功能</a></li><li><a href="#配置访问前缀">配置访问前缀</a></li><li><a href="#header过滤及重定向添加host">Header过滤及重定向添加Host</a></li><li><a href="#查看路由信息">查看路由信息</a></li></ul></li><li><a href="#过滤器">过滤器</a><ul><li><a href="#过滤器类型">过滤器类型</a></li><li><a href="#过滤器的生命周期">过滤器的生命周期</a></li><li><a href="#自定义过滤器">自定义过滤器</a></li><li><a href="#添加prelogfilter类继承zuulfilter">添加PreLogFilter类继承ZuulFilter</a></li><li><a href="#过滤器功能演示">过滤器功能演示</a></li><li><a href="#核心过滤器">核心过滤器</a></li><li><a href="#禁用过滤器">禁用过滤器</a></li></ul></li><li><a href="#ribbon和hystrix的支持">Ribbon和Hystrix的支持</a></li><li><a href="#常用配置">常用配置</a></li><li><a href="#使用到的模块">使用到的模块</a></li></ul></div><p></p> <h2 id="摘要"><a href="#摘要" class="header-anchor">#</a> 摘要</h2> <p>Spring Cloud Zuul 是Spring Cloud Netflix 子项目的核心组件之一，可以作为微服务架构中的API网关使用，
支持动态路由与过滤功能，本文将对其用法进行详细介绍。</p> <h2 id="zuul简介"><a href="#zuul简介" class="header-anchor">#</a> Zuul简介</h2> <p>API网关为微服务架构中的服务提供了统一的访问入口，客户端通过API网关访问相关服务。API网关的定义类似于<strong>设计模式中的门面模式</strong>，
它相当于整个微服务架构中的门面，所有客户端的访问都通过它来进行路由及过滤。它实现了请求路由、负载均衡、校验过滤、服务容错、服务聚合等功能。</p> <h2 id="创建一个zuul-proxy模块"><a href="#创建一个zuul-proxy模块" class="header-anchor">#</a> 创建一个zuul-proxy模块</h2> <blockquote><p>这里我们创建一个zuul-proxy模块来演示zuul的常用功能。</p></blockquote> <h3 id="在pom-xml中添加相关依赖"><a href="#在pom-xml中添加相关依赖" class="header-anchor">#</a> 在pom.xml中添加相关依赖</h3> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-zuul<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="在application-yml中进行配置"><a href="#在application-yml中进行配置" class="header-anchor">#</a> 在application.yml中进行配置</h3> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8801</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> zuul<span class="token punctuation">-</span>proxy
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">fetch-registry</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>8001/eureka/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="在启动类上添加-enablezuulproxy注解来启用zuul的api网关功能"><a href="#在启动类上添加-enablezuulproxy注解来启用zuul的api网关功能" class="header-anchor">#</a> 在启动类上添加@EnableZuulProxy注解来启用Zuul的API网关功能</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@EnableZuulProxy</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZuulProxyApplication</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ZuulProxyApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="常用功能"><a href="#常用功能" class="header-anchor">#</a> 常用功能</h2> <h3 id="启动相关服务"><a href="#启动相关服务" class="header-anchor">#</a> 启动相关服务</h3> <p>这里我们通过启动eureka-server，两个user-service，feign-service和zuul-proxy来演示Zuul的常用功能，启动后注册中心显示如下。</p> <p><img src="/ALiSang-Mr.github.io/assets/img/zuul_001.c8fa0fb3.png" alt="启动服务" title="启动服务"></p> <h3 id="配置路由规则"><a href="#配置路由规则" class="header-anchor">#</a> 配置路由规则</h3> <ul><li>我们可以通过修改application.yml中的配置来配置路由规则，这里我们将匹配/userService/**的请求路由到user-service服务上去，
匹配/feignService/**的请求路由到feign-service上去。</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">zuul</span><span class="token punctuation">:</span>
  <span class="token key atrule">routes</span><span class="token punctuation">:</span> <span class="token comment">#给服务配置路由</span>
    <span class="token key atrule">user-service</span><span class="token punctuation">:</span>
      <span class="token key atrule">path</span><span class="token punctuation">:</span> /userService/**
    <span class="token key atrule">feign-service</span><span class="token punctuation">:</span>
      <span class="token key atrule">path</span><span class="token punctuation">:</span> /feignService/**
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><p>访问http://localhost:8801/userService/user/1可以发现请求路由到了user-service上了；</p></li> <li><p>访问http://localhost:8801/feignService/user/1可以发现请求路由到了feign-service上了。</p></li></ul> <h3 id="默认路由规则"><a href="#默认路由规则" class="header-anchor">#</a> 默认路由规则</h3> <ul><li>Zuul和Eureka结合使用，可以实现路由的自动配置，自动配置的路由以服务名称为匹配路径，相当于如下配置：</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">#zuul:</span>
<span class="token comment">#  routes: #以服务名称给服务配置路由(默认)</span>
<span class="token comment">#    user-service:</span>
<span class="token comment">#      path: /user-service/**</span>
<span class="token comment">#    feign-service:</span>
<span class="token comment">#      path: /feign-service/**</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><p>访问http://localhost:8801/user-service/user/1同样可以路由到了user-service上了；</p></li> <li><p>访问http://localhost:8801/feign-service/user/1同样可以路由到了feign-service上了。</p></li> <li><p>如果不想使用默认的路由规则，可以添加以下配置来忽略默认路由配置：</p></li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">zuul</span><span class="token punctuation">:</span>
  <span class="token key atrule">ignored-services</span><span class="token punctuation">:</span> user<span class="token punctuation">-</span>service<span class="token punctuation">,</span>feign<span class="token punctuation">-</span>service <span class="token comment">#关闭默认路由配置</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="负载均衡功能"><a href="#负载均衡功能" class="header-anchor">#</a> 负载均衡功能</h3> <p>多次调用http://localhost:8801/user-service/user/1进行测试，可以发现运行在8201和8202的user-service服务交替打印如下信息。</p> <div class="language-markdown line-numbers-mode"><pre class="language-markdown"><code>2019-10-05 10:31:58.738  INFO 11520 --- [nio-8202-exec-5] c.alisang.cloud.controller.UserController  : 根据id获取用户信息，用户名称为：alisang
2019-10-05 10:32:00.356  INFO 11520 --- [nio-8202-exec-6] c.alisang.cloud.controller.UserController  : 根据id获取用户信息，用户名称为：alisang
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="配置访问前缀"><a href="#配置访问前缀" class="header-anchor">#</a> 配置访问前缀</h3> <p>我们可以通过以下配置来给网关路径添加前缀，此处添加了/proxy前缀，这样我们需要访问http://localhost:8801/proxy/user-service/user/1才能访问到user-service中的接口。</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">zuul</span><span class="token punctuation">:</span>
  <span class="token key atrule">prefix</span><span class="token punctuation">:</span> /proxy <span class="token comment">#给网关路由添加前缀</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="header过滤及重定向添加host"><a href="#header过滤及重定向添加host" class="header-anchor">#</a> Header过滤及重定向添加Host</h3> <ul><li>Zuul在请求路由时，默认会过滤掉一些敏感的头信息，以下配置可以防止路由时的Cookie及Authorization的丢失：</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">zuul</span><span class="token punctuation">:</span>
  <span class="token key atrule">sensitive-headers</span><span class="token punctuation">:</span> Cookie<span class="token punctuation">,</span>Set<span class="token punctuation">-</span>Cookie<span class="token punctuation">,</span>Authorization <span class="token comment">#配置过滤敏感的请求头信息，设置为空就不会过滤</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>Zuul在请求路由时，不会设置最初的host头信息，以下配置可以解决：</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">zuul</span><span class="token punctuation">:</span>
  <span class="token key atrule">add-host-header</span><span class="token punctuation">:</span> <span class="token boolean important">true </span><span class="token comment">#设置为true重定向是会添加host请求头</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="查看路由信息"><a href="#查看路由信息" class="header-anchor">#</a> 查看路由信息</h3> <blockquote><p>我们可以通过SpringBoot Actuator来查看Zuul中的路由信息。</p></blockquote> <ul><li>在pom.xml中添加相关依赖：</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>修改application.yaml配置文件，开启查看路由的端点：</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">'routes'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>通过访问http://localhost:8801/actuator/routes查看简单路由信息：</li></ul> <p><img src="data:image/png;base64,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WfluMtV+srz7ILvppmg/WdYvNJriK5t0ERP+sqGowE9mKyZDPzX6ytyFACN+Srdj/GVFM57u+kNdWJ+vDEXUQfl+suEuq89Xhugazjh+Mnd9XbygRVe4y/aq9pW56+tif5iuSNjL8JcVQ9l+soTPwjiPPY5hh9X7yqx16j37PPY64i+rj/F8PQN153mupCr1lQ3UXVzkmYf4yyajbD+ZtV49JT4lfD8V+8qs9eqmSMwz18dttsdfVi5j+smS697T41ZdvjJXJ0PFK/xlE1O2nywrz1r+nBy/Wdm+sqw865nhzM2z+MsqY1w/Wcp81tSbOXmtxVeWMp819ebMUfGXFUVdfrJJ3hOnPVfRlDYfQHfjUJyfrD/yC49qKWk6gOw0rL8DgLZAvAOAtkC8A4C2QLyDZjKtfrJhnx+DTx3MhJ8s737Ibjqpyk82dKf4ymaBpvjJhu8UX1nbKNNPVtzz4SubBpriJysAfGWzSbl+suguqf+PGb6yGaMpfrLQL5Fcd4yvrN2U7ydLXIWvbGZplJ8sbGi2x1fWbkr2k7n3wlc22zTFT2a1xlcGAWX7ybz09vjKZpRp95O5z1c0+MoaQXv8ZCH4ykqB9XcA0BaIdwDQFoh3ANAWiHfQTKbVT9YUQw/rmNOYCT9Zk31kyG48ivaTjUtVPrJxwT82EhX4yYqhPB9ZMeAfK41mp9lx191BHZTvJyudCX1k0HDG8ZP1jU2aT8zovRYfWS/27KT6w8yW+McKpGw/mbt+OOETq9lH5q4bTvjD8I/VzHi+HktPKdfbvVfvI7P05Hkp69aN8pR6/GPjUbafzIhf6T6xqPt6fGRG/Er3h0UN8Y/Vwph+MlcaSf+XfY+qfWRWXErzhzmN8Y8VQ9l+sr5zTW6ercFHZgzVMvxhcbtJ/GMwHuP6yYyJboZPLGpWi4/Mi//1kwx/WNRsMv8YWNTlJysK3hK3guL8ZNBqWH8HAG2BeAcAAAAAAJNw7/6DN9+q+yGghdy7j/CgetAd1AG6gzpAd1AH6A7qAN1BLSA8qAFkB3WA7qAO0B3UAbqDOkB3UD2sCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABoJP8Hd4MaH0C+mnoAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTAtMTBUMjM6MjA6MDArMDg6MDD3r9RHAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEwLTEwVDIzOjIwOjAwKzA4OjAwhvJs+wAAACB0RVh0c29mdHdhcmUAaHR0cHM6Ly9pbWFnZW1hZ2ljay5vcme8zx2dAAAAGHRFWHRUaHVtYjo6RG9jdW1lbnQ6OlBhZ2VzADGn/7svAAAAGHRFWHRUaHVtYjo6SW1hZ2U6OkhlaWdodAAxOTSpPtRgAAAAF3RFWHRUaHVtYjo6SW1hZ2U6OldpZHRoADYzMbUFjr0AAAAZdEVYdFRodW1iOjpNaW1ldHlwZQBpbWFnZS9wbmc/slZOAAAAF3RFWHRUaHVtYjo6TVRpbWUAMTU3MDcyMDgwMFiReN8AAAASdEVYdFRodW1iOjpTaXplADc0OTRCQojya8YAAABDdEVYdFRodW1iOjpVUkkAZmlsZTovLy90bXAvaW1hZ2VsYy9pbWd2aWV3Ml83XzE1NzA3MDUxMjY4Mzg3MjA2XzM1MF9bMF02apBvAAAAAElFTkSuQmCC" alt="看简单路由信息" title="看简单路由信息"></p> <ul><li>通过访问http://localhost:8801/actuator/routes/details查看详细路由信息：</li></ul> <p><img src="data:image/png;base64,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" alt="查看详细路由信息" title="查看详细路由信息"></p> <h2 id="过滤器"><a href="#过滤器" class="header-anchor">#</a> 过滤器</h2> <div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p><strong>路由与过滤是Zuul的两大核心功能</strong>，<strong>路由功能</strong>负责将外部请求转发到具体的服务实例上去，是实现统一访问入口的基础，
<strong>过滤功能</strong>负责对请求过程进行额外的处理，是请求校验过滤及服务聚合的基础。</p></div> <h3 id="过滤器类型"><a href="#过滤器类型" class="header-anchor">#</a> 过滤器类型</h3> <blockquote><p>Zuul中有以下几种典型的过滤器类型。</p></blockquote> <ul><li><p>pre：在请求被路由到目标服务前执行，比如权限校验、打印日志等功能；</p></li> <li><p>routing：在请求被路由到目标服务时执行，这是使用Apache HttpClient或Netflix Ribbon构建和发送原始HTTP请求的地方；</p></li> <li><p>post：在请求被路由到目标服务后执行，比如给目标服务的响应添加头信息，收集统计数据等功能；</p></li> <li><p>error：请求在其他阶段发生错误时执行。</p></li></ul> <h3 id="过滤器的生命周期"><a href="#过滤器的生命周期" class="header-anchor">#</a> 过滤器的生命周期</h3> <blockquote><p>下图描述了一个HTTP请求到达API网关后，如何在各种不同类型的过滤器中流转的过程</p></blockquote> <p><img src="/ALiSang-Mr.github.io/assets/img/zuul_004.017beabf.png" alt="HTTP请求到达API网关的不同过程" title="HTTP请求到达API网关的不同过程"></p> <h3 id="自定义过滤器"><a href="#自定义过滤器" class="header-anchor">#</a> 自定义过滤器</h3> <blockquote><p>接下来我们自定义一个过滤器来演示下过滤器的作用。</p></blockquote> <h3 id="添加prelogfilter类继承zuulfilter"><a href="#添加prelogfilter类继承zuulfilter" class="header-anchor">#</a> 添加PreLogFilter类继承ZuulFilter</h3> <blockquote><p>这是一个前置过滤器，用于在请求路由到目标服务前打印请求日志。</p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * Created by macro on 2019/9/9.
 */</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PreLogFilter</span> <span class="token keyword">extends</span> <span class="token class-name">ZuulFilter</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Logger</span> LOGGER <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 过滤器类型，有pre、routing、post、error四种。
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">filterType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;pre&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 过滤器执行顺序，数值越小优先级越高。
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">filterOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 是否进行过滤，返回true会执行过滤。
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">shouldFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 自定义的过滤器逻辑，当shouldFilter()返回true时会执行。
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ZuulException</span> <span class="token punctuation">{</span>
        <span class="token class-name">RequestContext</span> requestContext <span class="token operator">=</span> <span class="token class-name">RequestContext</span><span class="token punctuation">.</span><span class="token function">getCurrentContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">HttpServletRequest</span> request <span class="token operator">=</span> requestContext<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> host <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRemoteHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> method <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> uri <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        LOGGER<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Remote host:{},method:{},uri:{}&quot;</span><span class="token punctuation">,</span> host<span class="token punctuation">,</span> method<span class="token punctuation">,</span> uri<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h3 id="过滤器功能演示"><a href="#过滤器功能演示" class="header-anchor">#</a> 过滤器功能演示</h3> <p>添加过滤器后，我们访问http://localhost:8801/user-service/user/1测试下，会打印如下日志。</p> <div class="language-markdown line-numbers-mode"><pre class="language-markdown"><code>2019-10-05 15:13:10.232  INFO 11040 --- [nio-8801-exec-7] com.alisang.cloud.filter.PreLogFilter      : Remote host:0:0:0:0:0:0:0:1,method:GET,uri:/user-service/user/1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="核心过滤器"><a href="#核心过滤器" class="header-anchor">#</a> <strong>核心过滤器</strong></h3> <table><thead><tr><th>过滤器名称</th> <th style="text-align:center;">过滤类型</th> <th style="text-align:center;">优先级</th> <th style="text-align:right;">过滤器的作用</th></tr></thead> <tbody><tr><td>ServletDetectionFilter</td> <td style="text-align:center;">pre</td> <td style="text-align:center;">-3</td> <td style="text-align:right;">检测当前请求是通过DispatcherServlet</td></tr> <tr><td>Servlet30WrapperFilter</td> <td style="text-align:center;">pre</td> <td style="text-align:center;">-2</td> <td style="text-align:right;">处理运行的还是ZuulServlet运行处理的。</td></tr> <tr><td>FormBodyWrapperFilter</td> <td style="text-align:center;">pre</td> <td style="text-align:center;">-1</td> <td style="text-align:right;">对原始的HttpServletRequest进行包装。</td></tr> <tr><td>DebugFilter</td> <td style="text-align:center;">route</td> <td style="text-align:center;">1</td> <td style="text-align:right;">根据zuul.debug.request的配置来决定是否打印debug日志。</td></tr> <tr><td>PreDecorationFilter</td> <td style="text-align:center;">route</td> <td style="text-align:center;">5</td> <td style="text-align:right;">对当前请求进行预处理以便执行后续操作。</td></tr> <tr><td>RibbonRoutingFilter</td> <td style="text-align:center;">route</td> <td style="text-align:center;">10</td> <td style="text-align:right;">通过Ribbon和Hystrix来向服务实例发起请求，并将请求结果进行返回。</td></tr> <tr><td>SimpleHostRoutingFilter</td> <td style="text-align:center;">route</td> <td style="text-align:center;">100</td> <td style="text-align:right;">只对请求上下文中有routeHost参数的进行处理，直接使用HttpClient向routeHost对应的物理地址进行转发。</td></tr> <tr><td>SendForwardFilter</td> <td style="text-align:center;">route</td> <td style="text-align:center;">500</td> <td style="text-align:right;">只对请求上下文中有forward.to参数的进行处理，进行本地跳转。</td></tr> <tr><td>SendErrorFilter</td> <td style="text-align:center;">post</td> <td style="text-align:center;">0</td> <td style="text-align:right;">当其他过滤器内部发生异常时的会由它来进行处理，产生错误响应。</td></tr> <tr><td>SendResponseFilter</td> <td style="text-align:center;">post</td> <td style="text-align:center;">1000</td> <td style="text-align:right;">利用请求上下文的响应信息来组织请求成功的响应内容。</td></tr></tbody></table> <h3 id="禁用过滤器"><a href="#禁用过滤器" class="header-anchor">#</a> 禁用过滤器</h3> <ul><li>我们可以对过滤器进行禁用的配置，配置格式如下：</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">zuul</span><span class="token punctuation">:</span>
  <span class="token key atrule">filterClassName</span><span class="token punctuation">:</span>
    <span class="token key atrule">filter</span><span class="token punctuation">:</span>
      <span class="token key atrule">disable</span><span class="token punctuation">:</span> <span class="token boolean important">true </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>以下是禁用PreLogFilter的示例配置：</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">zuul</span><span class="token punctuation">:</span>
  <span class="token key atrule">PreLogFilter</span><span class="token punctuation">:</span>
    <span class="token key atrule">pre</span><span class="token punctuation">:</span>
      <span class="token key atrule">disable</span><span class="token punctuation">:</span> <span class="token boolean important">true </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="ribbon和hystrix的支持"><a href="#ribbon和hystrix的支持" class="header-anchor">#</a> Ribbon和Hystrix的支持</h2> <blockquote><p>由于Zuul自动集成了Ribbon和Hystrix，所以Zuul天生就有负载均衡和服务容错能力，我们可以通过Ribbon和Hystrix的配置来配置Zuul中的相应功能。</p></blockquote> <ul><li>可以使用Hystrix的配置来设置路由转发时HystrixCommand的执行超时时间：</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">hystrix</span><span class="token punctuation">:</span>
  <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token comment">#用于控制HystrixCommand的行为</span>
    <span class="token key atrule">default</span><span class="token punctuation">:</span>
      <span class="token key atrule">execution</span><span class="token punctuation">:</span>
        <span class="token key atrule">isolation</span><span class="token punctuation">:</span>
          <span class="token key atrule">thread</span><span class="token punctuation">:</span>
            <span class="token key atrule">timeoutInMilliseconds</span><span class="token punctuation">:</span> <span class="token number">1000 </span><span class="token comment">#配置HystrixCommand执行的超时时间，执行超过该时间会进行服务降级处理</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>可以使用Ribbon的配置来设置路由转发时请求连接及处理的超时时间：</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">ribbon</span><span class="token punctuation">:</span> <span class="token comment">#全局配置</span>
  <span class="token key atrule">ConnectTimeout</span><span class="token punctuation">:</span> <span class="token number">1000 </span><span class="token comment">#服务请求连接超时时间（毫秒）</span>
  <span class="token key atrule">ReadTimeout</span><span class="token punctuation">:</span> <span class="token number">3000 </span><span class="token comment">#服务请求处理超时时间（毫秒）</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="常用配置"><a href="#常用配置" class="header-anchor">#</a> 常用配置</h2> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">zuul</span><span class="token punctuation">:</span>
  <span class="token key atrule">routes</span><span class="token punctuation">:</span> <span class="token comment">#给服务配置路由</span>
    <span class="token key atrule">user-service</span><span class="token punctuation">:</span>
      <span class="token key atrule">path</span><span class="token punctuation">:</span> /userService/**
    <span class="token key atrule">feign-service</span><span class="token punctuation">:</span>
      <span class="token key atrule">path</span><span class="token punctuation">:</span> /feignService/**
  <span class="token key atrule">ignored-services</span><span class="token punctuation">:</span> user<span class="token punctuation">-</span>service<span class="token punctuation">,</span>feign<span class="token punctuation">-</span>service <span class="token comment">#关闭默认路由配置</span>
  <span class="token key atrule">prefix</span><span class="token punctuation">:</span> /proxy <span class="token comment">#给网关路由添加前缀</span>
  <span class="token key atrule">sensitive-headers</span><span class="token punctuation">:</span> Cookie<span class="token punctuation">,</span>Set<span class="token punctuation">-</span>Cookie<span class="token punctuation">,</span>Authorization <span class="token comment">#配置过滤敏感的请求头信息，设置为空就不会过滤</span>
  <span class="token key atrule">add-host-header</span><span class="token punctuation">:</span> <span class="token boolean important">true </span><span class="token comment">#设置为true重定向是会添加host请求头</span>
  <span class="token key atrule">retryable</span><span class="token punctuation">:</span> <span class="token boolean important">true </span><span class="token comment"># 关闭重试机制</span>
  <span class="token key atrule">PreLogFilter</span><span class="token punctuation">:</span>
    <span class="token key atrule">pre</span><span class="token punctuation">:</span>
      <span class="token key atrule">disable</span><span class="token punctuation">:</span> <span class="token boolean important">false </span><span class="token comment">#控制是否启用过滤器</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="使用到的模块"><a href="#使用到的模块" class="header-anchor">#</a> 使用到的模块</h2> <div class="language-markdown line-numbers-mode"><pre class="language-markdown"><code>springcloud-learning
├── eureka-server -- eureka注册中心
├── user-service -- 提供User对象CRUD接口的服务
├── feign-service -- feign服务调用测试服务
└── zuul-proxy -- zuul作为网关的测试服务
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/ALiSang-Mr.github.io/SpringCloud/OpenFeign/OpenFeign.html" class="prev">OpenFeign 基于Ribbon和Hystrix的声明式服务调用</a></span> <span class="next"><a href="/ALiSang-Mr.github.io/SpringCloud/Config/Config.html">Config 外部集中化配置管理</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/ALiSang-Mr.github.io/assets/js/app.4e173ec1.js" defer></script><script src="/ALiSang-Mr.github.io/assets/js/2.728c3c36.js" defer></script><script src="/ALiSang-Mr.github.io/assets/js/12.035f891d.js" defer></script>
  </body>
</html>
