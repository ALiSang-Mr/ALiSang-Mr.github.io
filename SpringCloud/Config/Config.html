<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Spring Cloud Config：外部集中化配置管理 | 阿利桑</title>
    <meta name="description" content="阿利桑 ALiSang-Mr 维基百科">
    <link rel="icon" href="/ALiSang-Mr.github.io/img/ali.ico">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    
    <link rel="preload" href="/ALiSang-Mr.github.io/assets/css/0.styles.21febb6e.css" as="style"><link rel="preload" href="/ALiSang-Mr.github.io/assets/js/app.4e173ec1.js" as="script"><link rel="preload" href="/ALiSang-Mr.github.io/assets/js/2.728c3c36.js" as="script"><link rel="preload" href="/ALiSang-Mr.github.io/assets/js/7.80eef07c.js" as="script"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/10.413d4a8a.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/11.5e13bb02.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/12.035f891d.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/13.8678ab9d.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/14.fd2682c5.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/15.79f7b2c6.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/16.dd7c3f73.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/17.4bd9133c.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/18.174b2afc.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/19.ef453d35.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/20.b9397fbc.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/21.88cbfa3d.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/22.190fbae8.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/23.255be8dc.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/24.d5ac6014.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/25.04a88ef4.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/26.919b3652.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/27.3fb2ecc8.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/28.b1412aff.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/29.51715fbe.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/3.8de677dd.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/30.334f2054.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/31.511d09e4.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/32.fa64cb71.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/33.0f6bccdd.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/34.cc5ab0f1.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/35.fcadeb75.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/36.a6a7d1b1.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/37.bb32a6af.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/38.830b348b.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/39.7a9225b7.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/4.40fbd1a3.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/40.7791cfe5.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/41.22b49eb6.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/42.edb08334.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/43.a6753e0a.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/44.993dbcdc.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/45.beea6627.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/46.30a8f03f.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/47.498642cd.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/48.cb8a97dd.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/49.f0ddc014.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/5.eee2d428.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/50.0362f335.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/51.b7d271b1.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/52.eb24d36d.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/53.7d012477.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/54.aa35e33b.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/55.0262d957.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/56.cc65acd7.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/57.6caae4af.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/58.25fc968c.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/59.ccacedc9.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/6.79dab355.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/60.a4b4a20c.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/8.d45d7c5e.js"><link rel="prefetch" href="/ALiSang-Mr.github.io/assets/js/9.118c7b84.js">
    <link rel="stylesheet" href="/ALiSang-Mr.github.io/assets/css/0.styles.21febb6e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ALiSang-Mr.github.io/" class="home-link router-link-active"><!----> <span class="site-name">阿利桑</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/ALiSang-Mr.github.io/FAQ/" class="nav-link">求索</a></div><div class="nav-item"><a href="/ALiSang-Mr.github.io/Store/" class="nav-link">仓库</a></div><div class="nav-item"><a href="/ALiSang-Mr.github.io/Thought/" class="nav-link">随笔</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Concat" class="dropdown-title"><span class="title">Concat</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://segmentfault.com/u/mulander" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Segmentfault
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/Java/Base/oop.html" class="nav-link">Java 面向对象基础</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/Java/Base/base.html" class="nav-link">Java 基础知识体系</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/Java/Concurrent/Thread.html" class="nav-link">Java 并发线程基础</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/Java/Concurrent/ExecutorPool.html" class="nav-link">Java 并发线程池</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SpringCloud" class="dropdown-title"><span class="title">SpringCloud</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/Eureka/Eureka.html" class="nav-link">Eureka 服务注册中心</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/Ribbon/Ribbon.html" class="nav-link">Ribbon 负载均衡的服务调用</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/Hystrix/Hystrix.html" class="nav-link">Hystrix 服务容错保护</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/OpenFeign/OpenFeign.html" class="nav-link">OpenFeign 基于Ribbon和Hystrix的声明式服务调用</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/Zuul/Zuul.html" class="nav-link">Zuul API网关服务</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/Config/Config.html" class="nav-link router-link-exact-active router-link-active">Config 外部集中化配置管理</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/Bus/Bus.html" class="nav-link">Bus 消息总线</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux" class="dropdown-title"><span class="title">Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/Linux/Deploy.html" class="nav-link">Linux 部署</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/Linux/Log.html" class="nav-link">Linux 日志命令</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/ALiSang-Mr" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub首页
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://mulander-j.github.io/island/code/html/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Island
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://mulander-j.github.io/timeWaster/demo/index.html#/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TimeWaster
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/ALiSang-Mr.github.io/FAQ/" class="nav-link">求索</a></div><div class="nav-item"><a href="/ALiSang-Mr.github.io/Store/" class="nav-link">仓库</a></div><div class="nav-item"><a href="/ALiSang-Mr.github.io/Thought/" class="nav-link">随笔</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Concat" class="dropdown-title"><span class="title">Concat</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://segmentfault.com/u/mulander" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Segmentfault
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/Java/Base/oop.html" class="nav-link">Java 面向对象基础</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/Java/Base/base.html" class="nav-link">Java 基础知识体系</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/Java/Concurrent/Thread.html" class="nav-link">Java 并发线程基础</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/Java/Concurrent/ExecutorPool.html" class="nav-link">Java 并发线程池</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SpringCloud" class="dropdown-title"><span class="title">SpringCloud</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/Eureka/Eureka.html" class="nav-link">Eureka 服务注册中心</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/Ribbon/Ribbon.html" class="nav-link">Ribbon 负载均衡的服务调用</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/Hystrix/Hystrix.html" class="nav-link">Hystrix 服务容错保护</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/OpenFeign/OpenFeign.html" class="nav-link">OpenFeign 基于Ribbon和Hystrix的声明式服务调用</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/Zuul/Zuul.html" class="nav-link">Zuul API网关服务</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/Config/Config.html" class="nav-link router-link-exact-active router-link-active">Config 外部集中化配置管理</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/SpringCloud/Bus/Bus.html" class="nav-link">Bus 消息总线</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux" class="dropdown-title"><span class="title">Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/Linux/Deploy.html" class="nav-link">Linux 部署</a></li><li class="dropdown-item"><!----> <a href="/ALiSang-Mr.github.io/Linux/Log.html" class="nav-link">Linux 日志命令</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/ALiSang-Mr" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub首页
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://mulander-j.github.io/island/code/html/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Island
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://mulander-j.github.io/timeWaster/demo/index.html#/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TimeWaster
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Eureka 服务注册中心</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Ribbon 负载均衡的服务调用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Hystrix 服务容错保护</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>OpenFeign 基于Ribbon和Hystrix的声明式服务调用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Zuul API网关服务</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Config 外部集中化配置管理</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ALiSang-Mr.github.io/SpringCloud/Config/Config.html" class="active sidebar-link">Config 外部集中化配置管理</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Bus 消息总线</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="spring-cloud-config：外部集中化配置管理"><a href="#spring-cloud-config：外部集中化配置管理" class="header-anchor">#</a> Spring Cloud Config：外部集中化配置管理</h1> <p></p><div class="table-of-contents"><ul><li><a href="#摘要">摘要</a></li><li><a href="#spring-cloud-config-简介">Spring Cloud Config 简介</a></li><li><a href="#在git仓库中准备配置信息">在Git仓库中准备配置信息</a><ul><li><a href="#配置仓库目录结构">配置仓库目录结构</a></li><li><a href="#master分支下的配置信息">master分支下的配置信息</a></li><li><a href="#dev分支下的配置信息">dev分支下的配置信息</a></li></ul></li><li><a href="#创建config-server模块">创建config-server模块</a><ul><li><a href="#在pom-xml中添加相关依赖">在pom.xml中添加相关依赖</a></li><li><a href="#在application-yml中进行配置">在application.yml中进行配置</a></li><li><a href="#在启动类上添加-enableconfigserver注解来启用配置中心功能">在启动类上添加@EnableConfigServer注解来启用配置中心功能</a></li><li><a href="#通过config-server获取配置信息">通过config-server获取配置信息</a></li><li><a href="#获取配置文件信息的访问格式">获取配置文件信息的访问格式</a></li><li><a href="#占位符相关解释">占位符相关解释</a></li><li><a href="#获取配置信息演示">获取配置信息演示</a></li></ul></li><li><a href="#创建config-client模块">创建config-client模块</a><ul><li><a href="#在pom-xml中添加相关依赖">在pom.xml中添加相关依赖</a></li><li><a href="#在bootstrap-yml中进行配置">在bootstrap.yml中进行配置</a></li><li><a href="#添加configclientcontroller类用于获取配置">添加ConfigClientController类用于获取配置</a></li><li><a href="#演示从配置中心获取配置">演示从配置中心获取配置</a></li><li><a href="#获取子目录下的配置">获取子目录下的配置</a></li><li><a href="#刷新配置">刷新配置</a></li></ul></li><li><a href="#配置中心添加安全认证">配置中心添加安全认证</a><ul><li><a href="#创建config-security-server模块">创建config-security-server模块</a></li><li><a href="#修改config-client的配置">修改config-client的配置</a></li></ul></li><li><a href="#config-sever集群搭建">config-sever集群搭建</a></li><li><a href="#使用到的模块">使用到的模块</a></li></ul></div><p></p> <h2 id="摘要"><a href="#摘要" class="header-anchor">#</a> 摘要</h2> <p>Spring Cloud Config 可以为微服务架构中的应用提供集中化的外部配置支持，它分为服务端和客户端两个部分，本文将对其用法进行详细介绍。</p> <h2 id="spring-cloud-config-简介"><a href="#spring-cloud-config-简介" class="header-anchor">#</a> Spring Cloud Config 简介</h2> <p>Spring Cloud Config 分为<strong>服务端</strong>和<strong>客户端</strong>两个部分。服务端被称为分布式配置中心，它是个独立的应用，可以从配置仓库获取配置信息并提供给客户端使用。
客户端可以通过配置中心来获取配置信息，在启动时加载配置。Spring Cloud Config 的配置中心默认采用Git来存储配置信息，
所以天然就支持配置信息的版本管理，并且可以使用Git客户端来方便地管理和访问配置信息。</p> <h2 id="在git仓库中准备配置信息"><a href="#在git仓库中准备配置信息" class="header-anchor">#</a> 在Git仓库中准备配置信息</h2> <p>由于Spring Cloud Config 需要一个存储配置信息的Git仓库，这里我们先在Git仓库中添加好配置文件再演示其功能，
Git仓库地址为：<a href="https://gitee.com/mwj2599/springcloud-config" target="_blank" rel="noopener noreferrer">https://gitee.com/mwj2599/springcloud-config<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h3 id="配置仓库目录结构"><a href="#配置仓库目录结构" class="header-anchor">#</a> 配置仓库目录结构</h3> <p><img src="/ALiSang-Mr.github.io/assets/img/config_001.c3ea99d5.jpg" alt="仓库目录结构" title="仓库目录结构"></p> <h3 id="master分支下的配置信息"><a href="#master分支下的配置信息" class="header-anchor">#</a> master分支下的配置信息</h3> <ul><li>config-dev.yml:</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">config</span><span class="token punctuation">:</span>
  <span class="token key atrule">info</span><span class="token punctuation">:</span> <span class="token string">&quot;config info for dev(master)&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>config-test.yml:</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">config</span><span class="token punctuation">:</span>
  <span class="token key atrule">info</span><span class="token punctuation">:</span> <span class="token string">&quot;config info for test(master)&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>config-prod.yml:</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">config</span><span class="token punctuation">:</span>
  <span class="token key atrule">info</span><span class="token punctuation">:</span> <span class="token string">&quot;config info for prod(master)&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="dev分支下的配置信息"><a href="#dev分支下的配置信息" class="header-anchor">#</a> dev分支下的配置信息</h3> <ul><li>config-dev.yml:</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">config</span><span class="token punctuation">:</span>
  <span class="token key atrule">info</span><span class="token punctuation">:</span> <span class="token string">&quot;config info for dev(dev)&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>config-test.yml:</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">config</span><span class="token punctuation">:</span>
  <span class="token key atrule">info</span><span class="token punctuation">:</span> <span class="token string">&quot;config info for test(dev)&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>config-prod.yml:</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">config</span><span class="token punctuation">:</span>
  <span class="token key atrule">info</span><span class="token punctuation">:</span> <span class="token string">&quot;config info for prod(dev)&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="创建config-server模块"><a href="#创建config-server模块" class="header-anchor">#</a> 创建config-server模块</h2> <blockquote><p>这里我们创建一个config-server模块来演示Spring Cloud Config 作为配置中心的功能。</p></blockquote> <h3 id="在pom-xml中添加相关依赖"><a href="#在pom-xml中添加相关依赖" class="header-anchor">#</a> 在pom.xml中添加相关依赖</h3> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-config-server<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="在application-yml中进行配置"><a href="#在application-yml中进行配置" class="header-anchor">#</a> 在application.yml中进行配置</h3> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8901</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> config<span class="token punctuation">-</span>server
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">server</span><span class="token punctuation">:</span>
        <span class="token key atrule">git</span><span class="token punctuation">:</span> <span class="token comment">#配置存储配置信息的Git仓库</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//gitee.com/mwj2599/springcloud<span class="token punctuation">-</span>config.git
          <span class="token key atrule">username</span><span class="token punctuation">:</span> alisang
          <span class="token key atrule">password</span><span class="token punctuation">:</span> ******
          <span class="token key atrule">clone-on-start</span><span class="token punctuation">:</span> <span class="token boolean important">true </span><span class="token comment">#开启启动时直接从git获取配置</span>
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>8001/eureka/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="在启动类上添加-enableconfigserver注解来启用配置中心功能"><a href="#在启动类上添加-enableconfigserver注解来启用配置中心功能" class="header-anchor">#</a> 在启动类上添加@EnableConfigServer注解来启用配置中心功能</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@EnableConfigServer</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigServerApplication</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ConfigServerApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="通过config-server获取配置信息"><a href="#通过config-server获取配置信息" class="header-anchor">#</a> 通过config-server获取配置信息</h3> <blockquote><p>这里我们通过config-server来演示下如何获取配置信息。</p></blockquote> <h3 id="获取配置文件信息的访问格式"><a href="#获取配置文件信息的访问格式" class="header-anchor">#</a> 获取配置文件信息的访问格式</h3> <div class="language-markdown line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 获取配置信息</span>
/{label}/{application}-{profile}
<span class="token title important"><span class="token punctuation">#</span> 获取配置文件信息</span>
/{label}/{application}-{profile}.yml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="占位符相关解释"><a href="#占位符相关解释" class="header-anchor">#</a> 占位符相关解释</h3> <ul><li><p>application：代表应用名称，默认为配置文件中的spring.application.name，如果配置了spring.cloud.config.name，则为该名称；</p></li> <li><p>label：代表分支名称，对应配置文件中的spring.cloud.config.label；</p></li> <li><p>profile：代表环境名称，对应配置文件中的spring.cloud.config.profile。</p></li></ul> <h3 id="获取配置信息演示"><a href="#获取配置信息演示" class="header-anchor">#</a> 获取配置信息演示</h3> <ul><li><p>启动eureka-server、config-server服务；</p></li> <li><p>访问<a href="http://localhost:8901/master/config-dev" target="_blank" rel="noopener noreferrer">http://localhost:8901/master/config-dev<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
来获取master分支上dev环境的配置信息；</p></li></ul> <p><img src="data:image/png;base64,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" alt="配置信息" title="配置信息"></p> <ul><li>访问<a href="http://localhost:8901/master/config-dev.yml" target="_blank" rel="noopener noreferrer">http://localhost:8901/master/config-dev.yml<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
来获取master分支上dev环境的配置文件信息，对比上面信息，可以看出配置信息和配置文件信息并不是同一个概念；</li></ul> <p><img src="data:image/png;base64,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Pns2N/eM9W/mPfEckg42i4Y83zM6OEhVOFObI1KEsV4Y9nw+HjuvfbjA+rcPo0xG6O17baXFWGulVuS1thOet8bIv5cbrg4+fElVOM8rgjOXVaAm+j2sK+35MLWdlFNppCqSO313MT4qkjt9ZzU+KpQ7gR8bFcvdukDfUY+HCuZuWf/S/5sYBxXOnf6f1FioBO4kEolEIpFGrf9IVVTZ045EIpFIJBKJRCKRSCQSiUQikUgkEolEIoE8r+wzIBUrQZy4V0we/pGqpjjoZAAmQ56057Dl/8Sx56mtKkaGf4LkWYFJ93yq8sAKtp5FZn+SFKLr6ciJ+yQrLffA4JMmQVnWO2mCZPp3mRax3v0ZQFNgImTE8/6PFs8boR5xr5JCJoBUHXkU2JFIJBKJRBoD5QhIKIZ58ZWLYVXBn3XUHtfe6O8OcnZQUfCDPPISSn5tm76fof3HFCDuz6W8391krRdXPkU7XurENPkEHmUOQ9rln3X4vIzpw4oQ9ywKPqoJP5+Pfy+T9XudtP0Y1Tz91UFEgYF8VSt8Ip4qGNduJbmr967Gdzexz+dzf6+Tth8j3QvbffM9oheu4Sd5Kt183xjRbrW5h39iuef/XidtPyafiP5TcLf0KZbcLnE/Q+6D3+ucMffghbFn1POkITL8lTwtzyPu1qi4e7n7ybDexX7EKXnhqmZ/0TsV0zAexro1/btRT1/vo7LzXmS/A9zN70fC51tx7kG4q4LcbPG8UW/we520/YTKae2b0wcrD9hvf8/PVX96A9HtVhP7yBR7PzDyTkdehZQk+l6HRCKRSCQSiUQikUgkEolEIpFIpP8BB2f8l44kR88AAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTAtMTRUMjE6MDQ6NDErMDg6MDAweDF+AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEwLTE0VDIxOjA0OjQxKzA4OjAwQSWJwgAAACB0RVh0c29mdHdhcmUAaHR0cHM6Ly9pbWFnZW1hZ2ljay5vcme8zx2dAAAAGHRFWHRUaHVtYjo6RG9jdW1lbnQ6OlBhZ2VzADGn/7svAAAAF3RFWHRUaHVtYjo6SW1hZ2U6OkhlaWdodAA5MDwVcVIAAAAXdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgANTAzcmACCwAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNTcxMDU4MjgxJj6IZAAAABJ0RVh0VGh1bWI6OlNpemUANDc3NEJCqRkUiwAAAEJ0RVh0VGh1bWI6OlVSSQBmaWxlOi8vL3RtcC9pbWFnZWxjL2ltZ3ZpZXcyXzdfMTU3MDcwMzY5Mzk3MzY3MjZfMzlfWzBdEMGixAAAAABJRU5ErkJggg==" alt="配置信息和配置文件" title="配置信息和配置文件"></p> <ul><li>访问<a href="http://localhost:8901/master/config-test.yml" target="_blank" rel="noopener noreferrer">http://localhost:8901/master/config-test.yml<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
来获取master分支上test环境的配置文件信息:</li></ul> <p><img src="data:image/png;base64,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" alt="配置信息和配置文件" title="配置信息和配置文件"></p> <ul><li>访问<a href="http://localhost:8901/develop/config-dev.yml" target="_blank" rel="noopener noreferrer">http://localhost:8901/develop/config-dev.yml<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>来获取dev分支上dev环境的配置文件信息:</li></ul> <p><img src="data:image/png;base64,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" alt="配置信息和配置文件" title="配置信息和配置文件"></p> <h2 id="创建config-client模块"><a href="#创建config-client模块" class="header-anchor">#</a> 创建config-client模块</h2> <blockquote><p>我们创建一个config-client模块来从config-server获取配置。</p></blockquote> <h3 id="在pom-xml中添加相关依赖-2"><a href="#在pom-xml中添加相关依赖-2" class="header-anchor">#</a> 在pom.xml中添加相关依赖</h3> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="在bootstrap-yml中进行配置"><a href="#在bootstrap-yml中进行配置" class="header-anchor">#</a> 在bootstrap.yml中进行配置</h3> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9001</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> config<span class="token punctuation">-</span>client
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span> <span class="token comment">#Config客户端配置</span>
      <span class="token key atrule">profile</span><span class="token punctuation">:</span> dev <span class="token comment">#启用配置后缀名称</span>
      <span class="token key atrule">label</span><span class="token punctuation">:</span> dev <span class="token comment">#分支名称</span>
      <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8901 </span><span class="token comment">#配置中心地址</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> config <span class="token comment">#配置文件名称</span>
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>8001/eureka/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="添加configclientcontroller类用于获取配置"><a href="#添加configclientcontroller类用于获取配置" class="header-anchor">#</a> 添加ConfigClientController类用于获取配置</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * Created by macro on 2019/9/11.
 */</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigClientController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${config.info}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> configInfo<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/configInfo&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getConfigInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> configInfo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="演示从配置中心获取配置"><a href="#演示从配置中心获取配置" class="header-anchor">#</a> 演示从配置中心获取配置</h3> <ul><li><p>启动config-client服务；</p></li> <li><p>访问<a href="http://localhost:9001/configInfo" target="_blank" rel="noopener noreferrer">http://localhost:9001/configInfo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，可以获取到dev分支下dev环境的配置；</p></li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code>config info for dev(dev)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="获取子目录下的配置"><a href="#获取子目录下的配置" class="header-anchor">#</a> 获取子目录下的配置</h3> <blockquote><p>我们不仅可以把每个项目的配置放在不同的Git仓库存储，也可以在一个Git仓库中存储多个项目的配置，此时就会用到在子目录中搜索配置信息的配置。</p></blockquote> <ul><li>首先我们需要在config-server中添加相关配置，用于搜索子目录中的配置，这里我们用到了application占位符，表示对于不同的应用，
我们从对应应用名称的子目录中搜索配置，比如config子目录中的配置对应config应用；</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">server</span><span class="token punctuation">:</span>
        <span class="token key atrule">git</span><span class="token punctuation">:</span> 
          <span class="token key atrule">search-paths</span><span class="token punctuation">:</span> <span class="token string">'{application}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>访问<a href="http://localhost:9001/configInfo" target="_blank" rel="noopener noreferrer">http://localhost:9001/configInfo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>进行测试，可以发现获取的是config子目录下的配置信息。</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code>config info for config dir dev(dev)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="刷新配置"><a href="#刷新配置" class="header-anchor">#</a> 刷新配置</h3> <blockquote><p>当Git仓库中的配置信息更改后，我们可以通过SpringBoot Actuator的refresh端点来刷新客户端配置信息，以下更改都需要在config-client中进行。</p></blockquote> <ul><li>在pom.xml中添加Actuator的依赖：</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>在bootstrap.yml中开启refresh端点：</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">'refresh'</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>在ConfigClientController类添加@RefreshScope注解用于刷新配置：</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * Created by macro on 2019/9/11.
 */</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RefreshScope</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigClientController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${config.info}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> configInfo<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/configInfo&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getConfigInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> configInfo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li><p>重新启动config-client后，调用refresh端点<a href="http://localhost:9001/actuator/refresh" target="_blank" rel="noopener noreferrer">http://localhost:9001/actuator/refresh<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>进行配置刷新：</p></li> <li><p>访问<a href="http://localhost:9001/configInfo" target="_blank" rel="noopener noreferrer">http://localhost:9001/configInfo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>进行测试，可以发现配置信息已经刷新</p></li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code>update config info for config dir dev(dev)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="配置中心添加安全认证"><a href="#配置中心添加安全认证" class="header-anchor">#</a> 配置中心添加安全认证</h2> <blockquote><p>我们可以通过整合SpringSecurity来为配置中心添加安全认证。</p></blockquote> <h3 id="创建config-security-server模块"><a href="#创建config-security-server模块" class="header-anchor">#</a> 创建config-security-server模块</h3> <ul><li>在pom.xml中添加相关依赖：</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-config-server<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-security<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>在application.yml中进行配置：</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8905</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> config<span class="token punctuation">-</span>security<span class="token punctuation">-</span>server
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">server</span><span class="token punctuation">:</span>
        <span class="token key atrule">git</span><span class="token punctuation">:</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//gitee.com/mwj2599/springcloud<span class="token punctuation">-</span>config.git
          <span class="token key atrule">username</span><span class="token punctuation">:</span> alisang
          <span class="token key atrule">password</span><span class="token punctuation">:</span> ******
          <span class="token key atrule">clone-on-start</span><span class="token punctuation">:</span> <span class="token boolean important">true </span><span class="token comment">#开启启动时直接从git获取配置</span>
  <span class="token key atrule">security</span><span class="token punctuation">:</span> <span class="token comment">#配置用户名和密码</span>
    <span class="token key atrule">user</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> alisang
      <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><ul><li>启动config-security-server服务。</li></ul> <h3 id="修改config-client的配置"><a href="#修改config-client的配置" class="header-anchor">#</a> 修改config-client的配置</h3> <p>添加bootstrap-security.yml配置文件，主要是配置了配置中心的用户名和密码：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9002</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> config<span class="token punctuation">-</span>client
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">profile</span><span class="token punctuation">:</span> dev <span class="token comment">#启用配置后缀名称</span>
      <span class="token key atrule">label</span><span class="token punctuation">:</span> dev <span class="token comment">#分支名称</span>
      <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8905 </span><span class="token comment">#配置中心地址</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> config <span class="token comment">#配置文件名称</span>
      <span class="token key atrule">username</span><span class="token punctuation">:</span> macro
      <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li><p>使用bootstrap-security.yml启动config-client服务；</p></li> <li><p>访问<a href="http://localhost:9002/configInfo" target="_blank" rel="noopener noreferrer">http://localhost:9002/configInfo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>进行测试，发现可以获取到配置信息。</p></li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code>config info for dev(dev)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="config-sever集群搭建"><a href="#config-sever集群搭建" class="header-anchor">#</a> config-sever集群搭建</h2> <blockquote><p>在微服务架构中，所有服务都从配置中心获取配置，配置中心一旦宕机，会发生很严重的问题，下面我们搭建一个双节点的配置中心集群来解决该问题。</p></blockquote> <ul><li><p>启动两个config-server分别运行在8902和8903端口上；</p></li> <li><p>添加config-client的配置文件bootstrap-cluster.yml，主要是添加了从注册中心获取配置中心地址的配置并去除了配置中心uri的配置</p></li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">profile</span><span class="token punctuation">:</span> dev <span class="token comment">#启用环境名称</span>
      <span class="token key atrule">label</span><span class="token punctuation">:</span> dev <span class="token comment">#分支名称</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> config <span class="token comment">#配置文件名称</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">service-id</span><span class="token punctuation">:</span> config<span class="token punctuation">-</span>server
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>8001/eureka/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>以bootstrap-cluster.yml启动config-client服务，注册中心显示信息如下：</li></ul> <p><img src="/ALiSang-Mr.github.io/assets/img/config_007.e7b126ff.png" alt="启动config-client服务" title="启动config-client服务"></p> <ul><li>访问http://localhost:9003/configInfo，发现config-client可以获取到配置信息。</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code>config info for config dir dev(dev)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="使用到的模块"><a href="#使用到的模块" class="header-anchor">#</a> 使用到的模块</h2> <div class="language-markdown line-numbers-mode"><pre class="language-markdown"><code>springcloud-learning
├── eureka-server -- eureka注册中心
├── config-server -- 配置中心服务
├── config-security-server -- 带安全认证的配置中心服务
└── config-client -- 获取配置的客户端服务
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/ALiSang-Mr.github.io/SpringCloud/Zuul/Zuul.html" class="prev">Zuul API网关服务</a></span> <span class="next"><a href="/ALiSang-Mr.github.io/SpringCloud/Bus/Bus.html">Bus 消息总线</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/ALiSang-Mr.github.io/assets/js/app.4e173ec1.js" defer></script><script src="/ALiSang-Mr.github.io/assets/js/2.728c3c36.js" defer></script><script src="/ALiSang-Mr.github.io/assets/js/7.80eef07c.js" defer></script>
  </body>
</html>
